<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engineer's Witt</title>
    <style>
        /* --- Basic Setup & Fonts --- */
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');

        :root {
            --bg-color: #1a232e;
            --container-bg: #2a3447;
            --text-color: #e0e0e0;
            --primary-color: #4fc3f7; /* Light Blue */
            --correct-color: #81c784; /* Green */
            --incorrect-color: #e57373; /* Red */
            --border-radius: 8px;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto Mono', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: var(--bg-color);
            background-image:
                linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 20px 20px;
            color: var(--text-color);
            padding: 1rem;
        }

        /* --- Game Container --- */
        .game-container {
            width: 100%;
            max-width: 600px;
            background-color: var(--container-bg);
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* --- Screen Visibility --- */
        .hidden {
            display: none;
        }

        /* --- Headings and Text --- */
        h1 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        h2 {
            margin-bottom: 1rem;
            font-weight: 400;
        }
        
        #punchline-text {
            font-size: 1.5rem;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 1.5rem 0;
            padding: 1rem;
            border: 1px dashed var(--primary-color);
            border-radius: var(--border-radius);
            line-height: 1.4;
        }

        .high-score-display {
            margin-top: 1rem;
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* --- Buttons --- */
        .btn {
            display: block;
            width: 100%;
            padding: 1rem;
            font-size: 1.2rem;
            font-family: 'Roboto Mono', monospace;
            font-weight: 700;
            color: #fff;
            background-color: var(--primary-color);
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 1.5rem;
            text-transform: uppercase;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 15px rgba(79, 195, 247, 0.4);
        }

        .answer-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        .answer-btn {
            background-color: #3f51b5; /* Indigo */
            padding: 0.8rem;
            font-size: 0.9rem;
            margin-top: 0;
            font-weight: 400;
        }

        .answer-btn:hover {
             background-color: #5c6bc0;
             box-shadow: 0 4px 15px rgba(63, 81, 181, 0.3);
        }
        
        /* --- Game Screen UI --- */
        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1.2rem;
            font-weight: 700;
        }

        #timer-container {
            width: 100%;
            height: 10px;
            background-color: rgba(0,0,0,0.3);
            border-radius: 5px;
            margin-top: 1rem;
            overflow: hidden;
        }

        #timer-bar {
            width: 100%;
            height: 100%;
            background-color: var(--primary-color);
            transition: width 1s linear;
        }

        /* --- Feedback Animations --- */
        .correct {
            animation: correct-flash 0.5s ease;
        }

        .incorrect {
            animation: incorrect-flash 0.5s ease;
        }

        @keyframes correct-flash {
            0% { background-color: var(--correct-color); transform: scale(1.05); }
            100% { background-color: #3f51b5; transform: scale(1); }
        }

        @keyframes incorrect-flash {
            0% { background-color: var(--incorrect-color); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { background-color: #3f51b5; transform: translateX(0); }
        }
        
        /* --- Responsive Design --- */
        @media (max-width: 480px) {
            .game-container {
                padding: 1.5rem;
            }
            .answer-grid {
                grid-template-columns: 1fr;
            }
            #punchline-text {
                font-size: 1.2rem;
            }
        }

    </style>
</head>
<body>

    <div class="game-container">
        <div id="start-screen">
            <h1>Engineer's Witt</h1>
            <h2>How well do you know your engineers?</h2>
            <p>Match the punchline to the discipline. Get as many right as you can in 60 seconds!</p>
            <button id="start-btn" class="btn">Start</button>
            <p class="high-score-display">High Score: <span id="start-high-score">0</span></p>
        </div>

        <div id="game-screen" class="hidden">
            <div class="game-header">
                <div id="score-display">Score: 0</div>
                <div id="timer-display">Time: 60</div>
            </div>
            <div id="timer-container">
                <div id="timer-bar"></div>
            </div>
            <p id="punchline-text">Loading punchline...</p>
            <div id="answer-grid" class="answer-grid">
                </div>
        </div>

        <div id="game-over-screen" class="hidden">
            <h1>Time's Up!</h1>
            <h2>Your Final Score: <span id="final-score">0</span></h2>
            <p class="high-score-display">High Score: <span id="end-high-score">0</span></p>
            <button id="play-again-btn" class="btn">Play Again</button>
        </div>
    </div>

    <script>
        // --- DOM Elements ---
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const gameOverScreen = document.getElementById('game-over-screen');

        const startBtn = document.getElementById('start-btn');
        const playAgainBtn = document.getElementById('play-again-btn');

        const scoreDisplay = document.getElementById('score-display');
        const finalScore = document.getElementById('final-score');
        const startHighScoreDisplay = document.getElementById('start-high-score');
        const endHighScoreDisplay = document.getElementById('end-high-score');

        const timerDisplay = document.getElementById('timer-display');
        const timerBar = document.getElementById('timer-bar');
        const punchlineText = document.getElementById('punchline-text');
        const answerGrid = document.getElementById('answer-grid');
        
        // --- Game Data ---
        const GAME_DURATION = 60; // seconds
        const DISCIPLINES = ["Chemical", "Civil", "Computer", "Electrical", "Electronic", "Mechanical"];
        
        const questions = [
            // Chemical
            { punchline: "Making matter, matter.", answer: "Chemical" },
            { punchline: "The original social influencers... we make reactions happen.", answer: "Chemical" },
            { punchline: "Finding the perfect solution, one mole at a time.", answer: "Chemical" },
            // Civil
            { punchline: "Building tomorrow's landmarks, today.", answer: "Civil" },
            { punchline: "Defying gravity so you don't have to.", answer: "Civil" },
            { punchline: "The world is our canvas, concrete is our paint.", answer: "Civil" },
            // Computer
            { punchline: "Turning caffeine and logic into the future.", answer: "Computer" },
            { punchline: "It's not a bug, it's an undocumented feature.", answer: "Computer" },
            { punchline: "Making hardware and software finally talk to each other.", answer: "Computer" },
            // Electrical
            { punchline: "Keeping the world current.", answer: "Electrical" },
            { punchline: "Resistance is futile... it's just V/I.", answer: "Electrical" },
            { punchline: "Providing the spark for every great idea.", answer: "Electrical" },
            // Electronic
            { punchline: "Turning sand into intelligence.", answer: "Electronic" },
            { punchline: "Thinking small to make big things happen.", answer: "Electronic" },
            { punchline: "The silent architects of the connected world.", answer: "Electronic" },
            // Mechanical
            { punchline: "If it moves, we designed it.", answer: "Mechanical" },
            { punchline: "The world would be static without us.", answer: "Mechanical" },
            { punchline: "Turning force and motion into progress.", answer: "Mechanical" },
        ];

        // --- Game State Variables ---
        let score = 0;
        let timeLeft = GAME_DURATION;
        let timerInterval = null;
        let shuffledQuestions = [];
        let currentQuestionIndex = 0;
        let highScore = localStorage.getItem('engineerWittHighScore') || 0;

        // --- Functions ---

        /**
         * Initializes the game, shuffles questions, and starts the timer.
         */
        function startGame() {
            score = 0;
            currentQuestionIndex = 0;
            timeLeft = GAME_DURATION;
            scoreDisplay.textContent = `Score: ${score}`;
            
            shuffledQuestions = [...questions].sort(() => Math.random() - 0.5);

            startScreen.classList.add('hidden');
            gameOverScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');

            setNextQuestion();
            startTimer();
        }

        /**
         * Starts the game timer and updates the UI.
         */
        function startTimer() {
            timerDisplay.textContent = `Time: ${timeLeft}`;
            timerBar.style.transition = `width ${GAME_DURATION}s linear`;
            timerBar.style.width = '0%';

            clearInterval(timerInterval); // Clear any existing timers
            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = `Time: ${timeLeft}`;
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        /**
         * Displays the next question or ends the game if questions are finished.
         */
        function setNextQuestion() {
            if (currentQuestionIndex >= shuffledQuestions.length) {
                // If we run out of questions, just end the game
                endGame();
                return;
            }
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            punchlineText.textContent = currentQuestion.punchline;
        }

        /**
         * Handles the user's answer selection.
         * @param {Event} e The click event from the answer button.
         */
        function selectAnswer(e) {
            const selectedButton = e.target;
            const selectedAnswer = selectedButton.textContent;
            const correctAnswer = shuffledQuestions[currentQuestionIndex].answer;

            if (selectedAnswer === correctAnswer) {
                score += 10;
                scoreDisplay.textContent = `Score: ${score}`;
                selectedButton.classList.add('correct');
            } else {
                selectedButton.classList.add('incorrect');
            }
            
            // Prevent further clicks while showing feedback
            answerGrid.style.pointerEvents = 'none';

            setTimeout(() => {
                selectedButton.classList.remove('correct', 'incorrect');
                currentQuestionIndex++;
                setNextQuestion();
                answerGrid.style.pointerEvents = 'auto'; // Re-enable clicks
            }, 500);
        }

        /**
         * Ends the game and displays the final score.
         */
        function endGame() {
            clearInterval(timerInterval);
            timerBar.style.transition = 'none'; // Reset transition for next game
            timerBar.style.width = '100%'; 

            gameScreen.classList.add('hidden');
            gameOverScreen.classList.remove('hidden');
            
            finalScore.textContent = score;
            updateHighScore();
        }

        /**
         * Updates and displays the high score.
         */
        function updateHighScore() {
            if (score > highScore) {
                highScore = score;
                localStorage.setItem('engineerWittHighScore', highScore);
            }
            startHighScoreDisplay.textContent = highScore;
            endHighScoreDisplay.textContent = highScore;
        }
        
        /**
         * Populates the answer grid with buttons.
         */
        function createAnswerButtons() {
            DISCIPLINES.forEach(discipline => {
                const button = document.createElement('button');
                button.textContent = discipline;
                button.classList.add('btn', 'answer-btn');
                button.addEventListener('click', selectAnswer);
                answerGrid.appendChild(button);
            });
        }
        
        // --- Event Listeners and Initial Setup ---
        startBtn.addEventListener('click', startGame);
        playAgainBtn.addEventListener('click', startGame);
        
        // Run on page load
        document.addEventListener('DOMContentLoaded', () => {
            updateHighScore();
            createAnswerButtons();
        });

    </script>
</body>
</html>